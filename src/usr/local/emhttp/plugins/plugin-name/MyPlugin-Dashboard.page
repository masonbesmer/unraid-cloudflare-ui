Cond="version_compare(parse_ini_file('/etc/unraid-version')['version'],'6.11.9','>')"
Menu="Dashboard:0"
---
<?php

$cardName = "my-plugin";

$mytiles[$cardName]["column1"] = <<<EOT
    <tbody title="My New Plugin">
      <tr>
        <td>
          <div class='tile-header' id='{$cardName}-dashboard-card'>
            <div class='tile-header-left'>
              <i class='icon-performance f32'></i>
              <div class='section'>
                <h3 class='tile-header-main' id='{$cardName}-dashboard-title'>
                  My New Plugin
                </h3>
                <span>Subtitle</span>
              </div>
            </div>
            <div class='tile-header-right'>
              <div class='tile-ctrl'>
                <!-- Primary control buttons -->
              </div>
              <div class='tile-header-right-controls'>
                <a id="{$cardName}-settings-button" href="/Settings/MyPlugin-Config" title="_(Settings)_"><i class="fa fa-fw fa-cog control"></i></a>
              </div>
            </div>
          </div>
        </td>
      </tr>
      <tr>
        <td><span class="w26">Parameter</span> Value </td>
      </tr>
    </tbody>

    EOT;

// Compatibilty for Unraid versions before 7.2
$isResponsiveWebgui = version_compare(parse_ini_file('/etc/unraid-version')['version'] ?? "", '7.2', '>=');
if ( ! $isResponsiveWebgui) {
    $mytiles[$cardName]["column1"] .= <<<EOT
        <script>
            $(function() {
                $('#{$cardName}-dashboard-title').replaceWith(function() {
                    return $(this).text() + "<br>";
                });
                $('#{$cardName}-settings-button').prependTo('#{$cardName}-dashboard-card');
            });
        </script>
        EOT;
}
?>
